{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_faultreporting/faultreports

    TODO describe template faultreports

    Example context (json):
    {
    }
}}
{{^reports}}
<p>{{#str}} noreports, local_faultreporting {{/str}}</p>
{{/reports}}
{{#reportcount}}
<p>{{#str}} reportcount, local_faultreporting, {{reportcount}} {{/str}}</p>
{{/reportcount}}
<ul class="list-group pb-3">
    {{#reports}}
    <li class="list-group-item">
        <div class="w-100">
            <h5 class="mb-1"><span style="font-weight: 500;" class="badge badge-{{statusclass}}">{{statusshortcode}}{{#haserrormessage}} - <i>{{errormsg}}</i>{{/haserrormessage}}</span>{{#showstatusdescription}} <span style="font-weight: 500;" class="badge badge-secondary"><i class="fa fa-info-circle"></i> {{statusdescription}}</span>{{/showstatusdescription}}{{#hasexternalid}} <small>{{#str}} externalid, local_faultreporting {{/str}}: <a target="_blank" href="{{assysteventsearchurl}}">{{externalid}}</a></small>{{/hasexternalid}}</h5>
        </div>
        <hr />
        <h6 class="text-uppercase">Description</h6>
        <p class="mb-1">{{description}}</p>
        <hr />
        <p class="mb-1">
            <small>{{#str}} user, core {{/str}}: <a target="_blank" href="{{globals.config.wwwroot}}/user/profile.php?id={{userid}}">{{user}} ({{username}})</a></small>
        </p>
        <p class="mb-1">
            <small>{{#str}} date, core {{/str}}: {{#userdate}} {{timemodified}}, {{#str}} strftimedate, core_langconfig {{/str}} {{/userdate}}</small>
        </p>
        <div class="d-flex justify-content-end" style="gap: 1em;">
            {{#canresend}}<a role="button" href="faultreports.php?sesskey={{sesskey}}&courseid={{courseid}}&action=resend&id={{id}}">{{#pix}} t/reload, core, {{#str}} resend, local_faultreporting {{/str}} {{/pix}}{{#str}} resend, local_faultreporting {{/str}}</a>{{/canresend}}
            <a role="button" href="faultreports.php?sesskey={{sesskey}}&courseid={{courseid}}&action=delete&id={{id}}">{{#pix}} t/delete, core, {{#str}} delete, core {{/str}} {{/pix}}{{#str}} delete, core {{/str}}</a>
        </div>
    </li>
{{/reports}}
</ul>
